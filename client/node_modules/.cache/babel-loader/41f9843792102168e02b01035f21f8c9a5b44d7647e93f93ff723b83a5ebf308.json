{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Route,Routes,Navigate}from'react-router-dom';import axios from'axios';// Import axios for API requests\nimport Navbar from'./components/Navbar';import Home from'./pages/Home';import Login from'./pages/Login';import Dashboard from'./pages/Dashboard';import AdminDashboard from'./pages/AdminDashboard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);useEffect(()=>{const fetchUser=async()=>{const token=localStorage.getItem('token');if(token){try{const response=await axios.get('http://localhost:5000/api/verify',{headers:{Authorization:`Bearer ${token}`}});setUser(response.data.user);}catch(error){localStorage.removeItem('token');setUser(null);}}};fetchUser();},[]);const PrivateRoute=_ref=>{let{element}=_ref;return user?element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});};const AdminRoute=_ref2=>{let{element}=_ref2;return user&&user.role==='admin'?element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"});};return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Navbar,{user:user,setUser:setUser}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setUser:setUser})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(PrivateRoute,{element:/*#__PURE__*/_jsx(Dashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(AdminRoute,{element:/*#__PURE__*/_jsx(AdminDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Routes","Navigate","axios","Navbar","Home","Login","Dashboard","AdminDashboard","jsx","_jsx","jsxs","_jsxs","App","user","setUser","fetchUser","token","localStorage","getItem","response","get","headers","Authorization","data","error","removeItem","PrivateRoute","_ref","element","to","AdminRoute","_ref2","role","children","path"],"sources":["C:/Users/jarno/Desktop/Spa-Website/babyspa/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Route, Routes, Navigate } from 'react-router-dom';\r\nimport axios from 'axios'; // Import axios for API requests\r\nimport Navbar from './components/Navbar';\r\nimport Home from './pages/Home';\r\nimport Login from './pages/Login';\r\nimport Dashboard from './pages/Dashboard';\r\nimport AdminDashboard from './pages/AdminDashboard';\r\n\r\n\r\nfunction App() {\r\n    const [user, setUser] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const token = localStorage.getItem('token');\r\n            if (token) {\r\n                try {\r\n                    const response = await axios.get('http://localhost:5000/api/verify', {\r\n                        headers: { Authorization: `Bearer ${token}` }\r\n                    });\r\n                    setUser(response.data.user);\r\n                } catch (error) {\r\n                    localStorage.removeItem('token');\r\n                    setUser(null);\r\n                }\r\n            }\r\n        };\r\n\r\n        fetchUser();\r\n    }, []);\r\n\r\n    const PrivateRoute = ({ element }) => (\r\n        user ? element : <Navigate to=\"/login\" />\r\n    );\r\n\r\n    const AdminRoute = ({ element }) => (\r\n        user && user.role === 'admin' ? element : <Navigate to=\"/dashboard\" />\r\n    );\r\n\r\n    return (\r\n        <Router>\r\n            <Navbar user={user} setUser={setUser} />\r\n            <Routes>\r\n                <Route path=\"/\" element={<Home />} />\r\n                <Route path=\"/login\" element={<Login setUser={setUser} />} />\r\n                <Route path=\"/dashboard\" element={<PrivateRoute element={<Dashboard />} />} />\r\n                <Route path=\"/admin\" element={<AdminRoute element={<AdminDashboard />} />} />\r\n                <Route path=\"*\" element={<Navigate to=\"/\" />} />\r\n            </Routes>\r\n        </Router>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}