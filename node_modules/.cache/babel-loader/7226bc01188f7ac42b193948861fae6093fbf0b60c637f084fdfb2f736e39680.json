{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import'./Navbar.css';import supabase from'../supabaseClient';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Navbar(_ref){let{user,setUser}=_ref;const[isMobileMenuOpen,setIsMobileMenuOpen]=useState(false);const[userRole,setUserRole]=useState(null);useEffect(()=>{const fetchUserRole=async()=>{if(user){// Fetch the user's role from the 'roles' table\nconst{data,error}=await supabase.from('roles').select('role').eq('user_id',user.id).single();if(error){console.error('Error fetching user role:',error);}else{setUserRole(data.role);}}};fetchUserRole();},[user]);const handleLogout=async()=>{await supabase.auth.signOut();// Logout using Supabase\nsetUser(null);setUserRole(null);// Clear user role on logout\n};const toggleMobileMenu=()=>{setIsMobileMenuOpen(!isMobileMenuOpen);};return/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-link\",children:user&&/*#__PURE__*/_jsxs(\"span\",{className:\"hello-text\",children:[\"Hello, \",user.email]})}),/*#__PURE__*/_jsx(\"button\",{className:\"mobile-menu-button\",onClick:toggleMobileMenu,children:\"\\u2630\"}),/*#__PURE__*/_jsx(\"ul\",{className:`nav-menu ${isMobileMenuOpen?'open':''}`,children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",children:\"Dashboard\"})}),userRole==='admin'&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin\",children:\"Admin Dashboard\"})}),/*#__PURE__*/_jsxs(\"li\",{className:\"invisible-for-mobile\",children:[\"Hello, \",user.email]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"Logout\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign Up\"})})]})})]})});}export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","Link","supabase","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Navbar","_ref","user","setUser","isMobileMenuOpen","setIsMobileMenuOpen","userRole","setUserRole","fetchUserRole","data","error","from","select","eq","id","single","console","role","handleLogout","auth","signOut","toggleMobileMenu","children","className","to","email","onClick"],"sources":["C:/Users/jarno/Desktop/Spa-Website/babyspa/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './Navbar.css';\r\nimport supabase from '../supabaseClient';\r\n\r\nfunction Navbar({ user, setUser }) {\r\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n    const [userRole, setUserRole] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchUserRole = async () => {\r\n            if (user) {\r\n                // Fetch the user's role from the 'roles' table\r\n                const { data, error } = await supabase\r\n                    .from('roles')\r\n                    .select('role')\r\n                    .eq('user_id', user.id)\r\n                    .single();\r\n\r\n                if (error) {\r\n                    console.error('Error fetching user role:', error);\r\n                } else {\r\n                    setUserRole(data.role);\r\n                }\r\n            }\r\n        };\r\n\r\n        fetchUserRole();\r\n    }, [user]);\r\n\r\n    const handleLogout = async () => {\r\n        await supabase.auth.signOut(); // Logout using Supabase\r\n        setUser(null);\r\n        setUserRole(null); // Clear user role on logout\r\n    };\r\n\r\n    const toggleMobileMenu = () => {\r\n        setIsMobileMenuOpen(!isMobileMenuOpen);\r\n    };\r\n\r\n    return (\r\n        <nav>\r\n            <div className=\"nav-container\">\r\n                <div className=\"logo\">\r\n                    <Link to=\"/\">Home</Link>\r\n                </div>\r\n                <div className='profile-link'>\r\n                    {user && <span className=\"hello-text\">Hello, {user.email}</span>}\r\n                </div>\r\n                <button className=\"mobile-menu-button\" onClick={toggleMobileMenu}>\r\n                    â˜°\r\n                </button>\r\n                <ul className={`nav-menu ${isMobileMenuOpen ? 'open' : ''}`}>\r\n                    {user ? (\r\n                        <>\r\n                            <li><Link to=\"/dashboard\">Dashboard</Link></li>\r\n                            {userRole === 'admin' && <li><Link to=\"/admin\">Admin Dashboard</Link></li>}\r\n                            <li className='invisible-for-mobile'>Hello, {user.email}</li>\r\n                            <li><button onClick={handleLogout} className=\"logout-button\">Logout</button></li>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <li><Link to=\"/login\">Login</Link></li>\r\n                            <li><Link to=\"/signup\">Sign Up</Link></li>\r\n                        </>\r\n                    )}\r\n                </ul>\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default Navbar;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,cAAc,CACrB,MAAO,CAAAC,QAAQ,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEzC,QAAS,CAAAC,MAAMA,CAAAC,IAAA,CAAoB,IAAnB,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAAF,IAAA,CAC7B,KAAM,CAACG,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACgB,QAAQ,CAAEC,WAAW,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAE9CC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAiB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAIN,IAAI,CAAE,CACN;AACA,KAAM,CAAEO,IAAI,CAAEC,KAAM,CAAC,CAAG,KAAM,CAAAjB,QAAQ,CACjCkB,IAAI,CAAC,OAAO,CAAC,CACbC,MAAM,CAAC,MAAM,CAAC,CACdC,EAAE,CAAC,SAAS,CAAEX,IAAI,CAACY,EAAE,CAAC,CACtBC,MAAM,CAAC,CAAC,CAEb,GAAIL,KAAK,CAAE,CACPM,OAAO,CAACN,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACrD,CAAC,IAAM,CACHH,WAAW,CAACE,IAAI,CAACQ,IAAI,CAAC,CAC1B,CACJ,CACJ,CAAC,CAEDT,aAAa,CAAC,CAAC,CACnB,CAAC,CAAE,CAACN,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAgB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAAzB,QAAQ,CAAC0B,IAAI,CAACC,OAAO,CAAC,CAAC,CAAE;AAC/BjB,OAAO,CAAC,IAAI,CAAC,CACbI,WAAW,CAAC,IAAI,CAAC,CAAE;AACvB,CAAC,CAED,KAAM,CAAAc,gBAAgB,CAAGA,CAAA,GAAM,CAC3BhB,mBAAmB,CAAC,CAACD,gBAAgB,CAAC,CAC1C,CAAC,CAED,mBACIT,IAAA,QAAA2B,QAAA,cACIzB,KAAA,QAAK0B,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC1B3B,IAAA,QAAK4B,SAAS,CAAC,MAAM,CAAAD,QAAA,cACjB3B,IAAA,CAACH,IAAI,EAACgC,EAAE,CAAC,GAAG,CAAAF,QAAA,CAAC,MAAI,CAAM,CAAC,CACvB,CAAC,cACN3B,IAAA,QAAK4B,SAAS,CAAC,cAAc,CAAAD,QAAA,CACxBpB,IAAI,eAAIL,KAAA,SAAM0B,SAAS,CAAC,YAAY,CAAAD,QAAA,EAAC,SAAO,CAACpB,IAAI,CAACuB,KAAK,EAAO,CAAC,CAC/D,CAAC,cACN9B,IAAA,WAAQ4B,SAAS,CAAC,oBAAoB,CAACG,OAAO,CAAEL,gBAAiB,CAAAC,QAAA,CAAC,QAElE,CAAQ,CAAC,cACT3B,IAAA,OAAI4B,SAAS,CAAE,YAAYnB,gBAAgB,CAAG,MAAM,CAAG,EAAE,EAAG,CAAAkB,QAAA,CACvDpB,IAAI,cACDL,KAAA,CAAAE,SAAA,EAAAuB,QAAA,eACI3B,IAAA,OAAA2B,QAAA,cAAI3B,IAAA,CAACH,IAAI,EAACgC,EAAE,CAAC,YAAY,CAAAF,QAAA,CAAC,WAAS,CAAM,CAAC,CAAI,CAAC,CAC9ChB,QAAQ,GAAK,OAAO,eAAIX,IAAA,OAAA2B,QAAA,cAAI3B,IAAA,CAACH,IAAI,EAACgC,EAAE,CAAC,QAAQ,CAAAF,QAAA,CAAC,iBAAe,CAAM,CAAC,CAAI,CAAC,cAC1EzB,KAAA,OAAI0B,SAAS,CAAC,sBAAsB,CAAAD,QAAA,EAAC,SAAO,CAACpB,IAAI,CAACuB,KAAK,EAAK,CAAC,cAC7D9B,IAAA,OAAA2B,QAAA,cAAI3B,IAAA,WAAQ+B,OAAO,CAAER,YAAa,CAACK,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,QAAM,CAAQ,CAAC,CAAI,CAAC,EACnF,CAAC,cAEHzB,KAAA,CAAAE,SAAA,EAAAuB,QAAA,eACI3B,IAAA,OAAA2B,QAAA,cAAI3B,IAAA,CAACH,IAAI,EAACgC,EAAE,CAAC,QAAQ,CAAAF,QAAA,CAAC,OAAK,CAAM,CAAC,CAAI,CAAC,cACvC3B,IAAA,OAAA2B,QAAA,cAAI3B,IAAA,CAACH,IAAI,EAACgC,EAAE,CAAC,SAAS,CAAAF,QAAA,CAAC,SAAO,CAAM,CAAC,CAAI,CAAC,EAC5C,CACL,CACD,CAAC,EACJ,CAAC,CACL,CAAC,CAEd,CAEA,cAAe,CAAAtB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}